# Django Application Services
# Service checks for the Django application

# Service: Check HTTP connectivity to Django app
define service {
    use                     local-service
    host_name               django-app-server
    service_description     HTTP Response Check
    check_command           check_http_django
    check_interval          5
    retry_interval          1
    max_check_attempts      3
    notification_period     24x7
    notification_interval   30
    notification_options    w,u,c,r
    contact_groups          admins
}

# Service: Check Gunicorn application server
define service {
    use                     local-service
    host_name               django-app-server
    service_description     Gunicorn Application Server
    check_command           check_tcp!8000
    check_interval          5
    retry_interval          1
    max_check_attempts      3
    notification_period     24x7
    notification_interval   30
    notification_options    w,u,c,r
    contact_groups          admins
}

# Service: Check Nginx reverse proxy
define service {
    use                     local-service
    host_name               django-app-server
    service_description     Nginx Web Server
    check_command           check_tcp!80
    check_interval          5
    retry_interval          1
    max_check_attempts      3
    notification_period     24x7
    notification_interval   30
    notification_options    w,u,c,r
    contact_groups          admins
}

# Service: Check CPU Load via NRPE
define service {
    use                     local-service
    host_name               django-app-server
    service_description     CPU Load
    check_command           check_nrpe_local!check_load
    check_interval          5
    retry_interval          1
    max_check_attempts      3
    notification_period     24x7
    notification_interval   30
    notification_options    w,u,c,r
    contact_groups          admins
}

# Service: Check Memory Usage via NRPE
define service {
    use                     local-service
    host_name               django-app-server
    service_description     Memory Usage
    check_command           check_nrpe_local!check_memory
    check_interval          5
    retry_interval          1
    max_check_attempts      3
    notification_period     24x7
    notification_interval   30
    notification_options    w,u,c,r
    contact_groups          admins
}

# Service: Check Disk Usage via NRPE
define service {
    use                     local-service
    host_name               django-app-server
    service_description     Disk Usage
    check_command           check_nrpe_local!check_disk_all
    check_interval          10
    retry_interval          1
    max_check_attempts      3
    notification_period     24x7
    notification_interval   30
    notification_options    w,u,c,r
    contact_groups          admins
}

# Service: Check Swap Usage via NRPE
define service {
    use                     local-service
    host_name               django-app-server
    service_description     Swap Usage
    check_command           check_nrpe_local!check_swap
    check_interval          10
    retry_interval          1
    max_check_attempts      3
    notification_period     24x7
    notification_interval   30
    notification_options    w,u,c,r
    contact_groups          admins
}

# Service: Check Process Count via NRPE
define service {
    use                     local-service
    host_name               django-app-server
    service_description     Process Count
    check_command           check_nrpe_local!check_procs
    check_interval          10
    retry_interval          1
    max_check_attempts      3
    notification_period     24x7
    notification_interval   30
    notification_options    w,u,c,r
    contact_groups          admins
}

# Service: Check Uptime via NRPE
define service {
    use                     local-service
    host_name               django-app-server
    service_description     System Uptime
    check_command           check_nrpe_local!check_uptime
    check_interval          30
    retry_interval          1
    max_check_attempts      3
    notification_period     24x7
    notification_interval   60
    notification_options    d,r
    contact_groups          admins
}

# Service: SSH Connectivity Check
define service {
    use                     local-service
    host_name               django-app-server
    service_description     SSH Connectivity
    check_command           check_tcp!22
    check_interval          10
    retry_interval          1
    max_check_attempts      3
    notification_period     24x7
    notification_interval   30
    notification_options    w,u,c,r
    contact_groups          admins
}

# Service: ICMP/Ping Check (via parent)
define service {
    use                     local-service
    host_name               django-app-server
    service_description     ICMP Ping
    check_command           check_ping!100.0,20%!500.0,60%
    check_interval          5
    retry_interval          1
    max_check_attempts      3
    notification_period     24x7
    notification_interval   30
    notification_options    d,u,c,r
    contact_groups          admins
}
